<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=shift_jis">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="janken.files/filelist.xml">
<title>じゃんけんマシンCプログラム 篠本2003/01/22</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>篠本　滋</o:Author>
  <o:LastAuthor>Shinomoto</o:LastAuthor>
  <o:Revision>12</o:Revision>
  <o:TotalTime>15</o:TotalTime>
  <o:Created>2003-01-23T06:38:00Z</o:Created>
  <o:LastSaved>2005-05-18T01:12:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>392</o:Words>
  <o:Characters>2239</o:Characters>
  <o:Company>京都大学</o:Company>
  <o:Lines>18</o:Lines>
  <o:Paragraphs>5</o:Paragraphs>
  <o:CharactersWithSpaces>2626</o:CharactersWithSpaces>
  <o:Version>11.6360</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:PunctuationKerning/>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>2</w:DisplayVerticalDrawingGridEvery>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:AdjustLineHeightInTable/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:"ＭＳ 明朝";
	panose-1:2 2 6 9 4 2 5 8 3 4;
	mso-font-alt:"MS Mincho";
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-pitch:fixed;
	mso-font-signature:-1610612033 1757936891 16 0 131231 0;}
@font-face
	{font-family:"ＭＳ ゴシック";
	panose-1:2 11 6 9 7 2 5 8 2 4;
	mso-font-alt:"MS Gothic";
	mso-font-charset:128;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-1610612033 1757936891 16 0 131231 0;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
@font-face
	{font-family:"\@ＭＳ 明朝";
	panose-1:2 2 6 9 4 2 5 8 3 4;
	mso-font-charset:128;
	mso-generic-font-family:roman;
	mso-font-pitch:fixed;
	mso-font-signature:-1610612033 1757936891 16 0 131231 0;}
@font-face
	{font-family:"\@ＭＳ ゴシック";
	panose-1:2 11 6 9 7 2 5 8 2 4;
	mso-font-charset:128;
	mso-generic-font-family:modern;
	mso-font-pitch:fixed;
	mso-font-signature:-1610612033 1757936891 16 0 131231 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0mm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	mso-bidi-font-size:12.0pt;
	font-family:Century;
	mso-fareast-font-family:"ＭＳ 明朝";
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:1.0pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;}
@page Section1
	{size:595.3pt 841.9pt;
	margin:99.25pt 30.0mm 30.0mm 30.0mm;
	mso-header-margin:42.55pt;
	mso-footer-margin:49.6pt;
	mso-paper-source:0;
	layout-grid:18.0pt;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:標準の表;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0mm 5.4pt 0mm 5.4pt;
	mso-para-margin:0mm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]-->
</head>

<body lang=JA link=blue vlink=purple style='tab-interval:42.0pt;text-justify-trim:
punctuation'>

<div class=Section1 style='layout-grid:18.0pt'>

<div style='mso-element:para-border-div;border:none;border-bottom:solid windowtext 1.0pt;
mso-border-bottom-alt:solid windowtext .75pt;padding:0mm 0mm 1.0pt 0mm'>

<p class=MsoNormal style='border:none;mso-border-bottom-alt:solid windowtext .75pt;
padding:0mm;mso-padding-alt:0mm 0mm 1.0pt 0mm'><span style='font-size:18.0pt;
mso-bidi-font-size:12.0pt;font-family:"ＭＳ ゴシック";color:olive'>じゃんけんマシン<span
lang=EN-US>C</span>試作品 篠本<span lang=EN-US>2003/01/22</span>　修正<span lang=EN-US>03/04,05/28<o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-bottom-alt:solid windowtext .75pt;
padding:0mm;mso-padding-alt:0mm 0mm 1.0pt 0mm'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"ＭＳ ゴシック";color:olive'>詳しくは<span
lang=EN-US><a href="http://www.ton.scphys.kyoto-u.ac.jp/~shino/prediction.html"><span
lang=EN-US style='color:olive'><span lang=EN-US>「情報処理概論-</span></span><span
lang=EN-US style='color:olive'><span lang=EN-US>予測とシミュレーション」（岩波書店）</span></span></a>pp101-107</span>を参照のこと．<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal style='border:none;mso-border-bottom-alt:solid windowtext .75pt;
padding:0mm;mso-padding-alt:0mm 0mm 1.0pt 0mm'><span lang=EN-US
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"ＭＳ ゴシック";
color:olive'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-bottom-alt:solid windowtext .75pt;
padding:0mm;mso-padding-alt:0mm 0mm 1.0pt 0mm'><span lang=EN-US
style='font-size:12.0pt;font-family:"ＭＳ ゴシック";color:black'>janken030304.c<o:p></o:p></span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>#include&lt;stdio.h&gt;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>#include&lt;math.h&gt;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>#define N 5<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/*1(</span><span
style='font-family:"ＭＳ ゴシック"'>グー<span lang=EN-US>),2(</span>チョキ<span
lang=EN-US>),3(</span>パー<span lang=EN-US>)</span>を入力すると，前もって決めていた<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='font-family:"ＭＳ ゴシック"'>マシンの手を示します．そして「勝ち，負け，引き分け」を表示．<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='font-family:"ＭＳ ゴシック"'>累積度数も示します．０以下の数を入力すると終了．<span
lang=EN-US>*/<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>int
perceptron(int m, int x[], int w[], int v[])<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/*</span><span
style='font-family:"ＭＳ ゴシック"'>　過去のデータ<span lang=EN-US>x[]</span>にもとづいて<span
lang=EN-US>w[]</span>をかけた入力<span lang=EN-US>v[]</span>の最大値をとる<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='font-family:"ＭＳ ゴシック"'>予想ユニットの番号（<span
lang=EN-US>1(</span>グー<span lang=EN-US>),2(</span>チョキ<span lang=EN-US>),3(</span>パー<span
lang=EN-US>)</span>）を返す．<span lang=EN-US>*/<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>{<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>int
i,j,k,kmax,vmax,prec[3];<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if(m
&lt;= 0) goto end;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>前回の相手プレイヤーの手<span lang=EN-US> m=1,2,3 </span>のバイナリー表現：<span
lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='font-family:"ＭＳ ゴシック"'>グー　<span lang=EN-US>(m=1)</span>：<span
lang=EN-US>prec={+1,-1,-1}<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='font-family:"ＭＳ ゴシック"'>チョキ<span lang=EN-US>(m=2)</span>：<span
lang=EN-US>prec={-1,+1,-1}<o:p></o:p></span></span></p>

<p class=MsoNormal><span style='font-family:"ＭＳ ゴシック"'>パー　<span lang=EN-US>(m=3)</span>：<span
lang=EN-US>prec={-1,-1,+1} */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-spacerun:yes'>&nbsp;</span><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for(k=0;k&lt;3;k++)prec[k]
= -1;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>prec[m-1]
= +1;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>各予測ユニットの入力と相手の新しい手のコードの符号が<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='font-family:"ＭＳ ゴシック"'>一致していない場合に誤り訂正学習を行う<span
lang=EN-US> */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for(k=0;k&lt;3;k++){<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if(prec[k]*v[k]
&lt;= 0){<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for(j=0;j&lt;3*N+1;j++)<span
style='mso-spacerun:yes'>&nbsp; </span>w[(3*N+1)*k+j] += prec[k]*x[j];<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* x[0]</span><span
style='font-family:"ＭＳ ゴシック"'>　から　<span lang=EN-US>x[3*N-1]</span>　を３ビット分右に移動　<span
lang=EN-US>*/<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*for(i=0;i&lt;3*N-4;i++)
x[3*N-1-i]=x[3*N-4-i];</span><span style='font-family:"ＭＳ ゴシック"'>オリジナル<span
lang=EN-US>*/<o:p></o:p></span></span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:42.0pt'><span
lang=EN-US style='font-family:"ＭＳ ゴシック"'>for(i=0;i&lt;3*N-3;i++)
x[3*N-1-i]=x[3*N-4-i];/*</span><span style='font-family:"ＭＳ ゴシック"'>青木高明氏によりバグ修正<span
lang=EN-US>2003/03/04 */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>前回の相手プレイヤーの手<span lang=EN-US>{prec[0], prec[1],
prec[2]} </span>を<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='font-family:"ＭＳ ゴシック"'>入力スロット最前列<span
lang=EN-US>{x[0],x[1],x[2]}</span>に挿入　<span lang=EN-US>*/<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for(i=0;i&lt;3;i++)x[i]=prec[i];<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>予測ユニットへの入力信号の算定<span lang=EN-US> */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for(k=0;k&lt;3;k++)v[k]=0;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for(k=0;k&lt;3;k++){for(j=0;j&lt;3*N+1;j++){<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>v[k]
+= w[(3*N+1)*k+j]*x[j];}}<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>最大入力を受けたユニットの番号（から１を引いたもの）<span lang=EN-US> */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>vmax=-1000000;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for(k=0;k&lt;3;k++){<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if(v[k]
&gt;= vmax){<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>vmax=v[k];<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>kmax=k;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:3'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>最大入力を受けた予測ユニットの番号（１，２，３）を返す<span lang=EN-US> */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>end:<span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>return(kmax+1);<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>}<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>int main()<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>{<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>char line[100];<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>int
i,pred,m,v[3],x[3*N+1],w[9*N+3],fw[3];<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>初期化<span lang=EN-US> */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for(i=0;i&lt;3;i++){<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>v[i]
= 0;<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</span><span
style='font-family:"ＭＳ ゴシック"'>　予測入力　<span lang=EN-US>*/<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>fw[i]
= 0; <span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</span><span
style='font-family:"ＭＳ ゴシック"'>　勝敗累積　<span lang=EN-US>*/<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for(i=0;i&lt;3*N;i++)x[i]
= 0;<span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</span><span
style='font-family:"ＭＳ ゴシック"'>　内部状態　<span lang=EN-US>*/<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>x[3*N]=-1;<span
style='mso-tab-count:6'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>/*</span><span
style='font-family:"ＭＳ ゴシック"'>　しきい　<span lang=EN-US>*/<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for(i=0;i&lt;9*N+3;i++)w[i]
= 0;<span style='mso-tab-count:1'>&nbsp;&nbsp; </span>/*</span><span
style='font-family:"ＭＳ ゴシック"'>　重み　<span lang=EN-US>*/<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>ゲームの開始<span lang=EN-US> */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>m=1;while(m&gt;0){<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>パーセプトロン予測を前もって行う<span lang=EN-US> */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>pred=perceptron(m,x,w,v);/*
pred</span><span style='font-family:"ＭＳ ゴシック"'>　は予測手<span lang=EN-US>(1,2,3) */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>ここで相手プレイヤーの手をインプット<span lang=EN-US> */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>printf(&quot;{1(</span><span
style='font-family:"ＭＳ ゴシック"'>グー<span lang=EN-US>),2(</span>チョキ<span
lang=EN-US>),3(</span>パー<span lang=EN-US>)}:&quot;);<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>fgets(line,
sizeof(line), stdin);<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>sscanf(line,
&quot;%d&quot;, &amp;m); <o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if(m
&gt; 3) m = 3;<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>printf(&quot;\n%1d&quot;,m);
/* m </span><span style='font-family:"ＭＳ ゴシック"'>はプレイヤーの手<span lang=EN-US>*/<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>パーセプトロンの「手」を示す<span lang=EN-US> */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>printf(&quot;&lt;-&gt;%1d:<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>&quot;,(pred+1)%3+1); <o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/*
(pred+1)%3+1</span><span style='font-family:"ＭＳ ゴシック"'>はパーセプトロンの予測手<span
lang=EN-US>pred</span>に対して勝つ「手」<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>pred=1(</span><span
style='font-family:"ＭＳ ゴシック"'>グー<span lang=EN-US>)<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>:(pred+1)%3+1=3(</span>パー<span
lang=EN-US>)<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>pred=2(</span><span
style='font-family:"ＭＳ ゴシック"'>チョキ<span lang=EN-US>) :(pred+1)%3+1=1(</span>グー<span
lang=EN-US>)<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>pred=3(</span><span
style='font-family:"ＭＳ ゴシック"'>パー<span lang=EN-US>)<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>:(pred+1)%3+1=2(</span>チョキ<span
lang=EN-US>)*/<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>これ以降は勝ち負け表示<span lang=EN-US> */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if(pred==m){printf(&quot;[</span><span
style='font-family:"ＭＳ ゴシック"'>マシンの勝ち<span lang=EN-US>]&quot;); fw[2]++;}<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>相手プレイヤーがマシンの予測通りの手を打ったのでマシンの勝ち<span lang=EN-US>*/<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>else
if((pred%3) == (m-1)){printf(&quot;[</span><span style='font-family:"ＭＳ ゴシック"'>あなたの勝ち<span
lang=EN-US>]&quot;); fw[0]++;}<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>相手プレイヤーの勝ち：つまり<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>pred%3=0(</span><span
style='font-family:"ＭＳ ゴシック"'>予測がパー<span lang=EN-US>)</span>だからチョキを出す：相手プレイヤーは<span
lang=EN-US> m-1=0 </span>グー<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>pred%3=1(</span><span
style='font-family:"ＭＳ ゴシック"'>予測がグー<span lang=EN-US>)</span>だからパーを出す　：相手プレイヤーは<span
lang=EN-US> m-1=1 </span>チョキ<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>pred%3=2(</span><span
style='font-family:"ＭＳ ゴシック"'>予測がチョキ<span lang=EN-US>)</span>だからグーを出す：相手プレイヤーは<span
lang=EN-US> m-1=2 </span>パー　<span lang=EN-US><o:p></o:p></span></span></p>

<p class=MsoNormal><span style='font-family:"ＭＳ ゴシック"'>戸田皓治氏によりコメント訂正<span
lang=EN-US>2003/05/28 */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>else
{printf(&quot;[</span><span style='font-family:"ＭＳ ゴシック"'>　引き分け　<span
lang=EN-US>]&quot;); fw[1]++;}<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>/* </span><span
style='font-family:"ＭＳ ゴシック"'>成績の表示<span lang=EN-US> */<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>printf(&quot;<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span></span><span
style='font-family:"ＭＳ ゴシック"'>マシン<span lang=EN-US>%4d, </span>引き分け<span
lang=EN-US>%4d, </span>あなた<span lang=EN-US>%4d \n&quot;,fw[2],fw[1],fw[0]);<o:p></o:p></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>}<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>return(0);<o:p></o:p></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:"ＭＳ ゴシック"'>}<o:p></o:p></span></p>

</div>

</body>

</html>
